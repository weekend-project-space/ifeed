spring:
  application:
    name: iFeed
  datasource:
    url: jdbc:postgresql://127.0.0.1:5432/i_feed
    username: i_feed
    password: 0123.
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 200
      connection-timeout: 30000
  threads:
    virtual:
      enabled: true
  ai:
    openai:
      api-key: ${ai.provider.api-key}
      base-url: ${ai.provider.endpoint}
      embedding:
        options:
          dimensions: 1024
          model: ${ai.provider.embedding-model}
          encoding-format: 'float'
        base-url: ${ai.provider.embedding-endpoint}
    vectorstore:
      pgvector:
        initialize-schema: true
        table-name: article_embeddings
        index-type: HNSW
        distance-type: COSINE_DISTANCE
        dimensions: 1024
  data:
    mongodb:
      host: 127.0.0.1
      port: 27017
      username: mongo_cTXZaN
      password: mongo_MDNyW6
      database: i_feed
  profiles:
    active: rel

# 定时任务
rss:
  fetcher:
    fixed-delay: PT60M
    initial-delay: PT1M
    thread-pool-size: 10
    connect-timeout: 50s
    read-timeout: 100s
    max-items: 500
    max-retries: 3
    cache:
      expire-after-write: 30m
      maximum-size: 1000
embedding:
  document:
    fixed-delay: PT10M
    initial-delay: PT15M
  user:
    fixed-delay: PT12H
    initial-delay: PT30s

# ai 集成
ai:
  provider:
    enabled: false
    endpoint: ''
    embedding-endpoint: '${ai.provider.endpoint}'
    api-key: ''
    model: 'gpt-4o-mini'
    embedding-model: 'Qwen/Qwen3-Embedding-4B'
# 检索
search:
  retrieval:
    bm25-top-k: 120
    vector-top-k: 120
    fusion-top-k: 200
    bm25-weight: 0.6
    vector-weight: 0.4
    freshness-time-weight: 0.3
    freshness-lambda: 0.01
    similarity-threshold: 0.3
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,threaddump