spring:
  application:
    name: iFeed
  datasource:
    url: jdbc:postgresql://127.0.0.1:5432/i_feed
    username: i_feed
    password: 0123.
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 200
      connection-timeout: 30000
  threads:
    virtual:
      enabled: true
  ai:
    openai:
      api-key: ${app.ai.provider.api-key}
      base-url: ${app.ai.provider.endpoint}
      chat:
        options:
          model: ${app.ai.provider.model}
          temperature: 0.5
      embedding:
        options:
          dimensions: 1024
          model: ${app.ai.provider.embedding-model}
          encoding-format: 'float'
        base-url: ${app.ai.provider.embedding-endpoint}
        api-key: ${app.ai.provider.embedding-api-key}
    vectorstore:
      pgvector:
        initialize-schema: true
        table-name: article_embeddings
        index-type: HNSW
        distance-type: COSINE_DISTANCE
        dimensions: 1024
  data:
    mongodb:
      host: 127.0.0.1
      port: 27017
      username: mongo_cTXZaN
      password: mongo_MDNyW6
      database: i_feed
  profiles:
    active: rel

app:
  # 定时任务
  rss:
    fetcher:
      fixed-delay: PT60M
      initial-delay: PT1M
      thread-pool-size: 10
      connect-timeout: 50s
      read-timeout: 100s
      max-items: 500
      max-retries: 3
      cache:
        expire-after-write: 30m
        maximum-size: 1000
  embedding:
    document:
      fixed-delay: PT10M
      initial-delay: PT15M
    user:
      fixed-delay: PT12H
      initial-delay: PT30s
      options:
        recent-behavior-limit: 200
        default-profile: '科技, 人工智能, 金融科技, 产品设计, 财经, 商业, 社会, 文化, 人物故事, 政治, 国际关系, 娱乐, 生活方式, 音乐, 游戏, 体育, 健康, 教育, 播客, 新闻, 科学, 犯罪悬疑, 环境保护, 历史, 心理学, 文学, 艺术, 创业, 政策, 国际贸易, 网络安全, 航天科技, 健康医疗, 社会经济, 文化评论, 综合'
  # ai 集成
  ai:
    provider:
      enabled: false
      endpoint: ''
      api-key: ''
      model: 'gpt-4o-mini'
      embedding-endpoint: '${app.ai.provider.endpoint}'
      embedding-api-key: '${app.ai.provider.api-key}'
      embedding-model: 'Qwen/Qwen3-Embedding-4B'
  # 检索
  search:
    retrieval:
      bm25-top-k: 120
      vector-top-k: 120
      fusion-top-k: 200
      bm25-weight: 0.6
      vector-weight: 0.4
      freshness-time-weight: 0.3
      freshness-lambda: 0.01
      similarity-threshold: 0.3
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,threaddump