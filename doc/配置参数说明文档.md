# ğŸ§© ç¯å¢ƒå˜é‡å‚æ•°è¯´æ˜æ–‡æ¡£

ä»¥ä¸‹ä¸ºåº”ç”¨é…ç½®ä¸­å¼•ç”¨çš„æ‰€æœ‰å¤§å†™ç¯å¢ƒå˜é‡åŠå…¶é»˜è®¤å€¼ã€‚

| ç¯å¢ƒå˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|-------------|----------|------|
| **`PG`** | `127.0.0.1` | PostgreSQL ä¸»æœºåœ°å€ |
| **`PG_PORT`** | `5432` | PostgreSQL ç«¯å£å· |
| **`PG_DATABASE`** | `i_feed` | PostgreSQL æ•°æ®åº“å |
| **`PG_USERNAME`** | `i_feed` | PostgreSQL ç”¨æˆ·å |
| **`PG_PASSWORD`** | `0123.` | PostgreSQL å¯†ç  |
| **`VECTOR_INDEX_TYPE`** | `HNSW` | å‘é‡ç´¢å¼•ç±»å‹ï¼ˆå¦‚ HNSW / IVF_FLAT / L2 ç­‰ï¼‰ |
| **`VECTOR_DISTANCE_TYPE`** | `COSINE_DISTANCE` | å‘é‡è·ç¦»åº¦é‡æ–¹å¼ï¼ˆå¦‚ COSINE_DISTANCE / L2_DISTANCEï¼‰ |
| **`MONGO_DB`** | `127.0.0.1` | MongoDB ä¸»æœºåœ°å€ |
| **`MONGO_DB_PORT`** | `27017` | MongoDB ç«¯å£å· |
| **`MONGO_DB_USERNAME`** | `mongo_cTXZaN` | MongoDB ç”¨æˆ·å |
| **`MONGO_DB_PASSWORD`** | `mongo_MDNyW6` | MongoDB å¯†ç  |
| **`MONGO_DB_DATABASE`** | `i_feed` | MongoDB æ•°æ®åº“å |


# ğŸ§­ åº”ç”¨é…ç½®å‚æ•°è¯´æ˜æ–‡æ¡£

```yaml
app:
  # å®šæ—¶ä»»åŠ¡
  rss:
    fetcher:
      fixed-delay: PT60M
      initial-delay: PT1M
      thread-pool-size: 10
      connect-timeout: 50s
      read-timeout: 100s
      max-items: 500
      max-retries: 3
      cache:
        expire-after-write: 30m
        maximum-size: 1000
  embedding:
    document:
      fixed-delay: PT10M
      initial-delay: PT15M
    user:
      fixed-delay: PT12H
      initial-delay: PT30s
      options:
        recent-behavior-limit: 200
        default-profile: 'ç§‘æŠ€, äººå·¥æ™ºèƒ½, é‡‘èç§‘æŠ€, äº§å“è®¾è®¡, è´¢ç», å•†ä¸š, ç¤¾ä¼š, æ–‡åŒ–, äººç‰©æ•…äº‹, æ”¿æ²», å›½é™…å…³ç³», å¨±ä¹, ç”Ÿæ´»æ–¹å¼, éŸ³ä¹, æ¸¸æˆ, ä½“è‚², å¥åº·, æ•™è‚², æ’­å®¢, æ–°é—», ç§‘å­¦, çŠ¯ç½ªæ‚¬ç–‘, ç¯å¢ƒä¿æŠ¤, å†å², å¿ƒç†å­¦, æ–‡å­¦, è‰ºæœ¯, åˆ›ä¸š, æ”¿ç­–, å›½é™…è´¸æ˜“, ç½‘ç»œå®‰å…¨, èˆªå¤©ç§‘æŠ€, å¥åº·åŒ»ç–—, ç¤¾ä¼šç»æµ, æ–‡åŒ–è¯„è®º, ç»¼åˆ'
  # ai é›†æˆ
  ai:
    provider:
      enabled: false
      endpoint: ''
      api-key: ''
      model: 'gpt-4o-mini'
      embedding:
        endpoint: '${app.ai.provider.endpoint}'
        api-key: '${app.ai.provider.api-key}'
        model: 'Qwen/Qwen3-Embedding-4B'
        options:
          dimensions: 1024
  # æ£€ç´¢
  search:
    retrieval:
      bm25-top-k: 120
      vector-top-k: 120
      fusion-top-k: 200
      bm25-weight: 0.6
      vector-weight: 0.4
      freshness-time-weight: 0.3
      freshness-lambda: 0.01
      similarity-threshold: 0.3
```




## ä¸€ã€RSS å®šæ—¶ä»»åŠ¡ï¼ˆ`app.rss`ï¼‰

ç”¨äºæ§åˆ¶ç³»ç»Ÿè‡ªåŠ¨æŠ“å– RSS è®¢é˜…æºçš„è¡Œä¸ºã€‚

### `app.rss.fetcher`

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `fixed-delay` | `Duration` | `PT60M` | æŠ“å–ä»»åŠ¡çš„å›ºå®šå»¶è¿Ÿå‘¨æœŸï¼ˆISO-8601 æ—¶é•¿æ ¼å¼ï¼‰ï¼Œå³æ¯æ¬¡ä»»åŠ¡é—´éš”å¤šä¹…æ‰§è¡Œã€‚æ­¤å¤„ä¸º **æ¯ 60 åˆ†é’Ÿ** æ‰§è¡Œä¸€æ¬¡ã€‚ |
| `initial-delay` | `Duration` | `PT1M` | å¯åŠ¨åº”ç”¨åç­‰å¾…çš„åˆå§‹å»¶è¿Ÿæ—¶é—´ï¼Œä¹‹åå†å¯åŠ¨ä»»åŠ¡ã€‚æ­¤å¤„ä¸º **å»¶è¿Ÿ 1 åˆ†é’Ÿ** å¼€å§‹æ‰§è¡Œç¬¬ä¸€æ¬¡æŠ“å–ã€‚ |
| `thread-pool-size` | `int` | `10` | RSS æŠ“å–çº¿ç¨‹æ± å¤§å°ï¼Œæ§åˆ¶åŒæ—¶æŠ“å–çš„æºæ•°é‡ã€‚ |
| `connect-timeout` | `Duration` | `50s` | HTTP è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚ |
| `read-timeout` | `Duration` | `100s` | è¯»å–å“åº”è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚ |
| `max-items` | `int` | `500` | æ¯æ¬¡æŠ“å–æ—¶æœ€å¤šå¤„ç†çš„æ¡ç›®æ•°é‡ï¼Œç”¨äºé˜²æ­¢å•æºè¿‡å¤§é€ æˆå†…å­˜å‹åŠ›ã€‚ |
| `max-retries` | `int` | `3` | æŠ“å–å¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚ |
| `cache.expire-after-write` | `Duration` | `30m` | RSS æŠ“å–ç»“æœç¼“å­˜çš„æœ‰æ•ˆæœŸï¼ˆå†™å…¥å 30 åˆ†é’Ÿè¿‡æœŸï¼‰ã€‚ |
| `cache.maximum-size` | `int` | `1000` | ç¼“å­˜ä¸­æœ€å¤šä¿å­˜çš„ RSS æºæ•°é‡ã€‚ |

---

## äºŒã€Embedding å®šæ—¶ä»»åŠ¡ï¼ˆ`app.embedding`ï¼‰

æ§åˆ¶å†…å®¹ä¸ç”¨æˆ·ç”»åƒçš„åµŒå…¥ç”Ÿæˆä¸æ›´æ–°é¢‘ç‡ã€‚

### `app.embedding.document`

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `fixed-delay` | `Duration` | `PT10M` | æ–‡æ¡£å†…å®¹åµŒå…¥ä»»åŠ¡æ‰§è¡Œé—´éš”ï¼ˆæ¯ 10 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚ |
| `initial-delay` | `Duration` | `PT15M` | åº”ç”¨å¯åŠ¨åå»¶è¿Ÿå¤šä¹…å¼€å§‹æ‰§è¡Œæ–‡æ¡£åµŒå…¥ä»»åŠ¡ï¼ˆ15 åˆ†é’Ÿï¼‰ã€‚ |

### `app.embedding.user`

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `fixed-delay` | `Duration` | `PT12H` | ç”¨æˆ·ç”»åƒåµŒå…¥ä»»åŠ¡æ‰§è¡Œé—´éš”ï¼ˆæ¯ 12 å°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚ |
| `initial-delay` | `Duration` | `PT30s` | åº”ç”¨å¯åŠ¨åå»¶è¿Ÿå¤šä¹…å¼€å§‹æ‰§è¡Œï¼ˆ30 ç§’ï¼‰ã€‚ |

#### `app.embedding.user.options`

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `recent-behavior-limit` | `int` | `200` | ç”¨æˆ·è¡Œä¸ºè®°å½•çš„æœ€å¤§é‡‡æ ·æ¡æ•°ï¼Œç”¨äºç”Ÿæˆä¸ªæ€§åŒ–åµŒå…¥ã€‚ |
| `default-profile` | `string` | `'ç§‘æŠ€, äººå·¥æ™ºèƒ½, ...'` | é»˜è®¤ç”¨æˆ·å…´è¶£ç”»åƒå…³é”®è¯ï¼Œç”¨äºæ— å†å²ç”¨æˆ·æˆ–å†·å¯åŠ¨æ—¶åˆå§‹åŒ–ç”¨æˆ·å‘é‡ã€‚ |

---

## ä¸‰ã€AI æ¨¡å‹é›†æˆï¼ˆ`app.ai`ï¼‰

### `app.ai.provider`

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `enabled` | `boolean` | `false` | æ˜¯å¦å¯ç”¨ AI æ¨¡å‹æœåŠ¡é›†æˆã€‚ |
| `endpoint` | `string` | `''` | AI æ¨¡å‹ API åœ°å€ã€‚ |
| `api-key` | `string` | `''` | AI æœåŠ¡ API å¯†é’¥ã€‚ |
| `model` | `string` | `'gpt-4o-mini'` | é»˜è®¤å¯¹è¯æ¨¡å‹åç§°ã€‚ |

#### `app.ai.provider.embedding`

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `endpoint` | `string` | `'${app.ai.provider.endpoint}'` | åµŒå…¥æ¨¡å‹æœåŠ¡åœ°å€ï¼Œé»˜è®¤ç»§æ‰¿ä¸» AI endpointã€‚ |
| `api-key` | `string` | `'${app.ai.provider.api-key}'` | åµŒå…¥æ¨¡å‹çš„ API å¯†é’¥ã€‚ |
| `model` | `string` | `'Qwen/Qwen3-Embedding-4B'` | åµŒå…¥ç”Ÿæˆæ¨¡å‹åç§°ã€‚ |
| `options.dimensions` | `int` | `1024` | å‘é‡ç»´åº¦å¤§å°ï¼ˆembedding è¾“å‡ºç»´åº¦ï¼‰ã€‚ |

---

## å››ã€æ£€ç´¢é…ç½®ï¼ˆ`app.search.retrieval`ï¼‰

ç”¨äºæ··åˆæ£€ç´¢ï¼ˆBM25 + å‘é‡å¬å›ï¼‰çš„èåˆç­–ç•¥ã€‚

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `bm25-top-k` | `int` | `120` | ä¼ ç»Ÿæ–‡æœ¬æ£€ç´¢ï¼ˆBM25ï¼‰è¿”å›çš„å€™é€‰æ•°é‡ã€‚ |
| `vector-top-k` | `int` | `120` | å‘é‡æ£€ç´¢è¿”å›çš„å€™é€‰æ•°é‡ã€‚ |
| `fusion-top-k` | `int` | `200` | æœ€ç»ˆèåˆæ’åºåä¿ç•™çš„å€™é€‰æ•°é‡ã€‚ |
| `bm25-weight` | `float` | `0.6` | èåˆæ—¶ BM25 åˆ†æ•°çš„æƒé‡ã€‚ |
| `vector-weight` | `float` | `0.4` | èåˆæ—¶å‘é‡ç›¸ä¼¼åº¦åˆ†æ•°çš„æƒé‡ã€‚ |
| `freshness-time-weight` | `float` | `0.3` | èåˆæ—¶æ–°é²œåº¦ï¼ˆæ—¶é—´è¡°å‡ï¼‰çš„æƒé‡ã€‚ |
| `freshness-lambda` | `float` | `0.01` | æ—¶é—´è¡°å‡é€Ÿç‡å‚æ•°ï¼Œå€¼è¶Šå¤§è¶Šå¼ºè°ƒæœ€æ–°å†…å®¹ã€‚ |
| `similarity-threshold` | `float` | `0.3` | æœ€å°ç›¸ä¼¼åº¦é˜ˆå€¼ï¼Œä½äºæ­¤å€¼çš„ç»“æœå°†è¢«è¿‡æ»¤ã€‚ |

---

## ğŸ“˜ é™„å½•ï¼šæ—¶é—´æ ¼å¼è¯´æ˜ï¼ˆISO-8601 Durationï¼‰

é…ç½®ä¸­ `PT` å¼€å¤´çš„æ—¶é•¿ä¸º **ISO-8601 æ—¶é—´æ ¼å¼**ï¼š

| è¡¨ç¤ºå½¢å¼ | å«ä¹‰ | ç¤ºä¾‹ |
|-----------|--------|------|
| `PT30S` | 30 ç§’ | S = ç§’ |
| `PT5M` | 5 åˆ†é’Ÿ | M = åˆ†é’Ÿ |
| `PT2H` | 2 å°æ—¶ | H = å°æ—¶ |
| `P1D` | 1 å¤© | D = å¤© |