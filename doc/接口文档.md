# AI ä¼˜å…ˆ RSS é˜…è¯»å™¨ï¼šæ¥å£æ–‡æ¡£ (API æ–‡æ¡£)

æœ¬æ¥å£æ–‡æ¡£æè¿°äº†å‰ç«¯ä¸åç«¯äº¤äº’æ‰€ä½¿ç”¨çš„ RESTful APIã€‚

> **åˆ†é¡µè¯´æ˜**
> æ‰€æœ‰å¸¦æœ‰ `page` / `size` æŸ¥è¯¢å‚æ•°çš„æ¥å£å‡è¿”å› Spring Data `Page` é£æ ¼çš„å“åº”ï¼Œç¤ºä¾‹ç»“æ„å¦‚ä¸‹ï¼ˆé¡µç ä» 0 å¼€å§‹ï¼‰ï¼š
>
> ```json
> {
>   "content": [ ... ],
>   "pageable": {
>     "pageNumber": 0,
>     "pageSize": 10,
>     "sort": {
>       "sorted": false,
>       "unsorted": true,
>       "empty": true
>     }
>   },
>   "totalElements": 42,
>   "totalPages": 5,
>   "last": false,
>   "first": true,
>   "size": 10,
>   "number": 0,
>   "sort": {
>     "sorted": false,
>     "unsorted": true,
>     "empty": true
>   },
>   "numberOfElements": 10,
>   "empty": false
> }
> ```

## 1. ç”¨æˆ·è®¤è¯

### æ³¨å†Œ

- æ–¹æ³•ï¼š`POST /api/auth/register`
- è®¤è¯ï¼šæ— éœ€è®¤è¯
- è¯·æ±‚ä½“ï¼š

```json
{
  "username": "string",
  "password": "string"
}
```

- å“åº”ä½“ï¼š

```json
{
  "token": "string",
  "userId": "string"
}
```

### ç™»å½•

- æ–¹æ³•ï¼š`POST /api/auth/login`
- è®¤è¯ï¼šæ— éœ€è®¤è¯
- è¯·æ±‚ä½“ï¼š

```json
{
  "username": "string",
  "password": "string"
}
```

- å“åº”ä½“ï¼š

```json
{
  "token": "string",
  "userId": "string"
}
```

### ç™»å‡º

- æ–¹æ³•ï¼š`POST /api/auth/logout`
- è®¤è¯ï¼š`Bearer <token>`ï¼ˆå¯é€‰ï¼‰
- è¯·æ±‚ä½“ï¼šæ— 
- å“åº”ä½“ï¼šæ— å†…å®¹ï¼ˆ204 No Contentï¼‰
- è¯´æ˜ï¼šç™»å‡ºå½“å‰ç”¨æˆ·ä¼šè¯ï¼Œä½¿ token å¤±æ•ˆã€‚å¦‚æœæä¾›äº†æœ‰æ•ˆçš„ Authorization å¤´ï¼ŒæœåŠ¡å™¨ä¼šå°†è¯¥ token æ ‡è®°ä¸ºå¤±æ•ˆã€‚

### è·å–ç”¨æˆ·ä¿¡æ¯

- æ–¹æ³•ï¼š`GET /api/user`
- è®¤è¯ï¼š`Bearer <token>`
- å“åº”ä½“ï¼š

```json
{
  "userId": "string",
  "username": "string"
}
```

## 2. è®¢é˜…ç®¡ç†

### æ·»åŠ è®¢é˜…

- æ–¹æ³•ï¼š`POST /api/subscriptions`
- è®¤è¯ï¼š`Bearer <token>`
- è¯·æ±‚ä½“ï¼š

```json
{
  "feedUrl": "string (å¯é€‰)",
  "sourceId": "string (å¯é€‰, UUID)"
}
```

- è¯´æ˜ï¼š
  - `feedUrl` å’Œ `sourceId` è‡³å°‘æä¾›å…¶ä¸€
  - å½“æä¾› `sourceId` æ—¶ï¼Œ**è‡ªåŠ¨æ£€æµ‹**è®¢é˜…ç±»å‹ï¼š
    - å…ˆå°è¯•æŒ‰ Feed UUID æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è®¢é˜…è¯¥ Feed
    - å¦‚æœæœªæ‰¾åˆ° Feedï¼Œå°è¯•æŒ‰ MixFeed UUID æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è®¢é˜…è¯¥ MixFeed
    - å¦‚æœéƒ½æœªæ‰¾åˆ°ï¼Œè¿”å› 404 é”™è¯¯
  - å½“æä¾› `feedUrl` æ—¶ï¼Œåˆ›å»ºæˆ–æŸ¥æ‰¾å¯¹åº”çš„ Feed å¹¶è®¢é˜…
- å“åº”ä½“ï¼š

```json
{
  "message": "Subscription added."
}
```

### è·å–è®¢é˜…åˆ—è¡¨

- æ–¹æ³•ï¼š`GET /api/subscriptions`
- è®¤è¯ï¼š`Bearer <token>`
- å“åº”ä½“ï¼š

```json
[
  {
    "feedId": "string",
    "title": "string",
    "url": "string",
    "siteUrl": "string",
    "avatar": "https://example.com",
    "lastFetched": "2024-03-01T08:00:00Z",
    "lastUpdated": "2024-03-01T09:45:00Z",
    "isRead": true,
    "failureCount": 0,
    "fetchError": null,
    "type": "FEED",
    "icon": "https://example.com/favicon.ico"
  }
]
```

- è¯´æ˜ï¼š
  - è¿”å›æ‰€æœ‰è®¢é˜…ï¼ˆåŒ…æ‹¬ Feed å’Œ MixFeedï¼‰
  - `type` å­—æ®µæ ‡è¯†è®¢é˜…ç±»å‹ï¼š`FEED` æˆ– `MIX_FEED`
  - Feed ç›¸å…³å­—æ®µï¼š
    - `lastFetched`ï¼šåç«¯æœ€è¿‘ä¸€æ¬¡æŠ“å–è¯¥æºçš„æ—¶é—´
    - `siteUrl`ï¼šè®¢é˜…æºå¯¹åº”çš„ç½‘ç«™ä¸»é¡µï¼Œå½“ç¼ºå¤±æ—¶å›é€€è‡³ `url`
    - `lastUpdated`ï¼šRSS æºå†…å®¹æ£€æµ‹åˆ°çš„æœ€è¿‘æ›´æ–°æ—¶é—´ï¼Œç”¨äºå‰ç«¯æç¤ºæºçš„æ´»è·ƒåº¦
    - `isRead`ï¼šå½“å‰ç”¨æˆ·å·²è¯»
    - `failureCount`ï¼šè¿ç»­æŠ“å–å¤±è´¥æ¬¡æ•°ï¼ŒæˆåŠŸæŠ“å–åä¼šå½’é›¶
    - `fetchError`ï¼šæœ€è¿‘ä¸€æ¬¡æŠ“å–å¤±è´¥çš„é”™è¯¯æç¤ºï¼Œè‹¥æš‚æ— å¤±è´¥åˆ™ä¸º `null`



### å–æ¶ˆè®¢é˜…

- æ–¹æ³•ï¼š`DELETE /api/subscriptions/:feedId`
- è®¤è¯ï¼š`Bearer <token>`
- å“åº”ä½“ï¼š

```json
{
  "message": "Subscription removed."
}
```

### ä¸Šä¼ å¹¶è§£æ OPML

- æ–¹æ³•ï¼š`POST /api/subscriptions/opml/preview`
- è®¤è¯ï¼š`Bearer <token>`
- æè¿°ï¼šä¸Šä¼  OPML æ–‡ä»¶å¹¶è§£æå‡ºè®¢é˜…æºåˆ—è¡¨ï¼Œè¿”å›ç»“æœä¾›ç”¨æˆ·ç¡®è®¤ã€‚
- è¯·æ±‚ä½“ï¼š`multipart/form-data`
  - `file`ï¼šOPML æ–‡ä»¶ï¼Œå»ºè®® `Content-Type` ä¸º `text/x-opml` æˆ– `application/xml`
- å“åº”ä½“ï¼š

```json
{
  "feeds": [
    {
      "feedUrl": "https://example.com/rss.xml",
      "title": "string",
      "siteUrl": "https://example.com",
      "avatar": "https://example.com/icon.png",
      "alreadySubscribed": false,
      "errors": []
    }
  ],
  "warnings": ["string"],
  "remainingQuota": 480
}
```

- `remainingQuota`ï¼šå¯ç”¨è®¢é˜…é¢åº¦ã€‚æ¯ä¸ªè´¦å·é»˜è®¤ä¸Šé™ 500 ä¸ªè®¢é˜…ï¼Œè¯¥å­—æ®µä¸º `500 - å·²è®¢é˜…æ•°é‡`ã€‚

- å“åº”ç ï¼š
  - `200 OK`
  - `400 Bad Request`ï¼ˆæ–‡ä»¶ç¼ºå¤±ã€æ ¼å¼ä¸åˆæ³•æˆ–æ— æœ‰æ•ˆè®¢é˜…ï¼‰
  - `413 Payload Too Large`
  - `415 Unsupported Media Type`

### ç¡®è®¤ OPML å¯¼å…¥

- æ–¹æ³•ï¼š`POST /api/subscriptions/opml/confirm`
- è®¤è¯ï¼š`Bearer <token>`
- æè¿°ï¼šæ¥æ”¶é¢„è§ˆç»“æœä¸­çš„è®¢é˜…æºåˆ—è¡¨å¹¶æ‰§è¡Œå¯¼å…¥ï¼Œä»…å¯¼å…¥ `selected = true` çš„æ¡ç›®ã€‚
- è¯·æ±‚ä½“ï¼š

```json
{
  "feeds": [
    {
      "feedUrl": "https://example.com/rss.xml",
      "title": "string",
      "siteUrl": "https://example.com",
      "avatar": "https://example.com/icon.png",
      "selected": true
    }
  ]
}
```

- å“åº”ä½“ï¼š

```json
{
  "importedCount": 3,
  "skipped": [
    {
      "feedUrl": "https://example.com/rss.xml",
      "reason": "ALREADY_SUBSCRIBED"
    }
  ],
  "message": "OPML import completed."
}
```

- å“åº”ç ï¼š
  - `200 OK`
  - `400 Bad Request`ï¼ˆè¯·æ±‚ä½“ä¸ºç©ºæˆ–ç»“æ„ä¸ç¬¦ï¼‰
  - `409 Conflict`ï¼ˆéƒ¨åˆ†æ¡ç›®å¯¼å…¥å¤±è´¥ï¼Œè¯¦æƒ…è§ `skipped`ï¼‰
  - `422 Unprocessable Entity`ï¼ˆå­—æ®µç¼ºå¤±æˆ–å†…å®¹éæ³•ï¼‰

## 3. MixFeed ç®¡ç†

MixFeed æ˜¯ä¸€ç§è™šæ‹Ÿèšåˆæºï¼Œå…è®¸ç”¨æˆ·ä»å¤šä¸ªè®¢é˜…æºä¸­ç­›é€‰å’Œç»„åˆæ–‡ç« ã€‚

### åˆ›å»º MixFeed

- æ–¹æ³•ï¼š`POST /api/mix-feeds`
- è®¤è¯ï¼š`Bearer <token>`
- è¯·æ±‚ä½“ï¼š

```json
{
  "name": "string",
  "description": "string (å¯é€‰)",
  "icon": "string (å¯é€‰)",
  "isPublic": false,
  "filterConfig": {
    "sourceFeeds": {
      "uuid1": "Feed Name 1",
      "uuid2": "Feed Name 2"
    },
    "keywords": {
      "include": ["AI", "æŠ€æœ¯"],
      "exclude": ["å¹¿å‘Š"]
    },
    "dateRange": {
      "from": "2024-01-01T00:00:00Z",
      "to": "2024-12-31T23:59:59Z"
    },
    "sortBy": "publishedAt",
    "sortOrder": "DESC"
  }
}
```

- å“åº”ä½“ï¼š

```json
{
  "message": "MixFeed created."
}
```

- è¯´æ˜ï¼š
  - `filterConfig` ä¸ºå¯é€‰å­—æ®µï¼Œå„å­å­—æ®µä¹Ÿå‡ä¸ºå¯é€‰
  - `sourceFeeds` ä¸ºç©ºè¡¨ç¤ºåŒ…å«æ‰€æœ‰è®¢é˜…æº
  - `isPublic` ä¸º true æ—¶ï¼Œè¯¥ MixFeed ä¼šåœ¨å…¬å¼€å¸‚åœºæ˜¾ç¤º

### è·å–æˆ‘çš„ MixFeed åˆ—è¡¨

- æ–¹æ³•ï¼š`GET /api/mix-feeds`
- è®¤è¯ï¼š`Bearer <token>`
- å“åº”ä½“ï¼š

```json
[
  {
    "mixFeedId": "string (UUID)",
    "name": "string",
    "description": "string",
    "icon": "string",
    "subscriberCount": 0,
    "isPublic": false,
    "createdAt": "2024-03-01T10:00:00Z"
  }
]
```

### è·å– MixFeed è¯¦æƒ…

- æ–¹æ³•ï¼š`GET /api/mix-feeds/{id}`
- è®¤è¯ï¼š`Bearer <token>`
- è·¯å¾„å‚æ•°ï¼š
  - `id`: MixFeed UUID
- å“åº”ä½“ï¼š

```json
{
  "mixFeedId": "string (UUID)",
  "name": "string",
  "description": "string",
  "icon": "string",
  "subscriberCount": 123,
  "articleCount": 456,
  "subscribed": true,
  "isPublic": false,
  "createdAt": "2024-03-01T10:00:00Z",
  "updatedAt": "2024-03-02T15:30:00Z"
}
```

- è¯´æ˜ï¼š
  - åªèƒ½è®¿é—®å…¬å¼€çš„ MixFeed æˆ–è‡ªå·±åˆ›å»ºçš„ MixFeed
  - `subscribed` è¡¨ç¤ºå½“å‰ç”¨æˆ·æ˜¯å¦å·²è®¢é˜…è¯¥ MixFeed

### æ›´æ–° MixFeed

- æ–¹æ³•ï¼š`PUT /api/mix-feeds/{id}`
- è®¤è¯ï¼š`Bearer <token>`
- è·¯å¾„å‚æ•°ï¼š
  - `id`: MixFeed UUID
- è¯·æ±‚ä½“ï¼šï¼ˆæ‰€æœ‰å­—æ®µå‡å¯é€‰ï¼‰

```json
{
  "name": "string",
  "description": "string",
  "icon": "string",
  "isPublic": true,
  "filterConfig": {
    "sourceFeeds": {
      "uuid1": "Feed Name 1",
      "uuid2": "Feed Name 2"
    }
  }
}
```

- å“åº”ä½“ï¼š

```json
{
  "message": "MixFeed updated."
}
```

- è¯´æ˜ï¼š
  - åªèƒ½æ›´æ–°è‡ªå·±åˆ›å»ºçš„ MixFeed

### åˆ é™¤ MixFeed

- æ–¹æ³•ï¼š`DELETE /api/mix-feeds/{id}`
- è®¤è¯ï¼š`Bearer <token>`
- è·¯å¾„å‚æ•°ï¼š
  - `id`: MixFeed UUID
- å“åº”ä½“ï¼š

```json
{
  "message": "MixFeed deleted."
}
```

- è¯´æ˜ï¼š
  - åªèƒ½åˆ é™¤è‡ªå·±åˆ›å»ºçš„ MixFeed
  - å¦‚å­˜åœ¨æ´»è·ƒè®¢é˜…è€…ï¼Œåˆ é™¤å°†å¤±è´¥ï¼ˆè¿”å› 400ï¼‰

### æµè§ˆå…¬å¼€ MixFeed

- æ–¹æ³•ï¼š`GET /api/mix-feeds/public`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `page`ï¼ˆé»˜è®¤ 0ï¼‰
  - `size`ï¼ˆé»˜è®¤ 10ï¼‰
  - `sort`ï¼ˆé»˜è®¤ `subscriberCount,desc`ï¼‰
- å“åº”ä½“ï¼šåˆ†é¡µæ ¼å¼

```json
{
  "content": [
    {
      "mixFeedId": "string (UUID)",
      "name": "string",
      "description": "string",
      "icon": "string",
      "subscriberCount": 123,
      "isPublic": true,
      "createdAt": "2024-03-01T10:00:00Z"
    }
  ],
  "totalElements": 42,
  "totalPages": 5
}
```

## 4. æ–‡ç« å†…å®¹

### è·å–æ–‡ç« åˆ—è¡¨

- æ–¹æ³•ï¼š`GET /api/articles`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `page`ï¼ˆé»˜è®¤ 0ï¼‰
  - `size`ï¼ˆé»˜è®¤ 10ï¼‰
  - `sort`ï¼ˆå¯é€‰ï¼Œå¦‚ `publishedAt,desc`ï¼‰
  - `feedId`ï¼ˆå¯é€‰ï¼ŒFeed æˆ– MixFeed çš„ UUIDï¼‰
  - `tags`ï¼ˆå¯é€‰ï¼ŒæŒ‰æ ‡ç­¾è¿‡æ»¤ï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰
  - `category`ï¼ˆå¯é€‰ï¼ŒæŒ‰æ–‡ç« åˆ†ç±»è¿‡æ»¤ï¼Œå¤§å°å†™ä¸æ•æ„Ÿï¼‰
  - `source`ï¼ˆå¯é€‰ï¼Œé»˜è®¤ `owner`ã€‚`owner`ï¼šåªè¿”å›å½“å‰ç”¨æˆ·çš„æ•°æ®ï¼›`global`ï¼šè¿”å›å…¨å±€æ•°æ®ï¼Œä¸åŒºåˆ†ç”¨æˆ·ï¼‰
- è¯´æ˜ï¼š
  - å½“ä¸æŒ‡å®š `feedId` æ—¶ï¼Œè¿”å›æ‰€æœ‰è®¢é˜…æºçš„æ–‡ç« 
  - å½“æŒ‡å®š `feedId` æ—¶ï¼Œ**è‡ªåŠ¨æ£€æµ‹**æ˜¯ Feed è¿˜æ˜¯ MixFeedï¼š
    - å…ˆå°è¯•æŒ‰ Feed UUID æŸ¥è¯¢ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›è¯¥ Feed çš„æ–‡ç« 
    - å¦‚æœæœªæ‰¾åˆ° Feedï¼Œå†å°è¯•æŒ‰ MixFeed UUID æŸ¥è¯¢ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›è¯¥ MixFeed çš„æ–‡ç« ï¼ˆåŸºäºè¿‡æ»¤è§„åˆ™ï¼‰
    - å¦‚æœéƒ½æœªæ‰¾åˆ°ï¼Œè¿”å› 404 é”™è¯¯
  - MixFeed çš„æ–‡ç« åŸºäºå½“å‰ç”¨æˆ·è®¢é˜…çš„ Feedï¼Œåº”ç”¨ MixFeed çš„è¿‡æ»¤è§„åˆ™
- å“åº”ä½“ï¼š

```json
{
  "content": [
    {
      "id": "string",
      "title": "string",
      "link": "string",
      "summary": "string",
      "thumbnail": "https://example.com/cover.jpg",
      "enclosure": "https://example.com/audio.mp3",
      "feedTitle": "string",
      "publishedAt": "2024-03-01T10:00:00Z",
      "tags": ["AI", "æ¨è"],
      "timeAgo": "2 å°æ—¶å‰"
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 10,
    "sort": {
      "sorted": true,
      "unsorted": false,
      "empty": false
    }
  },
  "totalElements": 42,
  "totalPages": 5,
  "last": false,
  "first": true,
  "size": 10,
  "number": 0,
  "sort": {
    "sorted": true,
    "unsorted": false,
    "empty": false
  },
  "numberOfElements": 10,
  "empty": false
}
```

- `thumbnail`ï¼šç”¨äºå±•ç¤ºæ–‡ç« ç¼©ç•¥å›¾ï¼Œé€šå¸¸æ¥è‡ª RSS ä¸­çš„å›¾ç‰‡èµ„æºï¼Œå¯èƒ½ä¸ºç©ºã€‚
- `enclosure`ï¼šåŸå§‹å¤šåª’ä½“èµ„æºé“¾æ¥ï¼ˆéŸ³é¢‘ã€è§†é¢‘ç­‰ï¼‰ï¼Œå¯ç”¨äºæ’­æ”¾å™¨æˆ–ä¸‹è½½ã€‚
- `tags` æŸ¥è¯¢æ”¯æŒé€—å·åˆ†éš”çš„å¤šä¸ªæ ‡ç­¾ï¼Œå¿½ç•¥å¤§å°å†™ã€‚
- `category` æŸ¥è¯¢æŒ‰æ–‡ç«  `category` å­—æ®µç²¾ç¡®åŒ¹é…ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ã€‚

### è·å–æ–‡ç« è¯¦æƒ…

- æ–¹æ³•ï¼š`GET /api/articles/:articleId`
- è®¤è¯ï¼š`Bearer <token>`
- å“åº”ä½“ï¼š

```json
{
  "id": "string",
  "title": "string",
  "content": "string",
  "summary": "string",
  "thumbnail": "https://example.com/cover.jpg",
  "enclosure": "https://example.com/audio.mp3",
  "feedId": "string",
  "feedTitle": "string",
  "publishedAt": "2024-03-01T10:00:00Z",
  "tags": ["AI", "æ¨è"],
  "collected": true
}
```

- `collected`ï¼šå½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è—è¯¥æ–‡ç« ã€‚

### è·å–æ¨èæ–‡ç« 

- æ–¹æ³•ï¼š`GET /api/articles/recommendations`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `size`ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 10ï¼Œæœ€å¤§ 30ï¼‰
  - `page`ï¼ˆé»˜è®¤ 0ï¼‰
- å“åº”ä½“ç¤ºä¾‹ï¼š

```json
{
  "content": [
    {
      "id": "string",
      "title": "string",
      "link": "string",
      "summary": "string",
      "thumbnail": "https://example.com/cover.jpg",
      "enclosure": "https://example.com/audio.mp3",
      "feedTitle": "string",
      "publishedAt": "2024-03-01T10:00:00Z",
      "timeAgo": "2 å°æ—¶å‰"
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 10,
    "sort": {
      "sorted": true,
      "unsorted": false,
      "empty": false
    }
  },
  "totalElements": 42,
  "totalPages": 5,
  "last": false,
  "first": true,
  "size": 10,
  "number": 0,
  "sort": {
    "sorted": true,
    "unsorted": false,
    "empty": false
  },
  "numberOfElements": 10,
  "empty": false
}
```

### è·å–è®¢é˜…å†…å®¹æ¦‚è§ˆï¼ˆåˆ†ç±»ä¸çƒ­é—¨æ ‡ç­¾ï¼‰

- æ–¹æ³•ï¼š`GET /api/articles/insights`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `from`ï¼ˆå¯é€‰ï¼ŒISO-8601 æ—¶é—´ï¼Œé»˜è®¤ `now-30d`ï¼‰
  - `to`ï¼ˆå¯é€‰ï¼ŒISO-8601 æ—¶é—´ï¼Œé»˜è®¤ `now`ï¼‰
  - `top`ï¼ˆå¯é€‰ï¼Œçƒ­é—¨æ ‡ç­¾è¿”å›ä¸ªæ•°ï¼Œé»˜è®¤ 20ï¼‰
- è¯´æ˜ï¼šç»Ÿè®¡å½“å‰ç”¨æˆ·å¯è§èŒƒå›´å†…ï¼ˆå…¶æ¿€æ´»çš„è®¢é˜…æºï¼‰çš„æ–‡ç« ï¼Œåœ¨ç»™å®šæ—¶é—´çª—å£å†…çš„åˆ†ç±»è®¡æ•°å’Œçƒ­é—¨æ ‡ç­¾ã€‚
- å“åº”ä½“ï¼š

```json
{
  "categories": [
    {
      "category": "Tech",
      "count": 12
    },
    {
      "category": "AI",
      "count": 8
    }
  ],
  "hotTags": [
    {
      "tag": "llm",
      "count": 10
    },
    {
      "tag": "java",
      "count": 7
    }
  ]
}
```

## 6. è®¢é˜…æºé¢‘é“

### è·å–è®¢é˜…æºè¯¦æƒ…

- æ–¹æ³•ï¼š`GET /api/feeds/:feedId`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `feedType`ï¼ˆå¯é€‰ï¼Œé»˜è®¤ `FEED`ã€‚`FEED`ï¼šæ™®é€šè®¢é˜…æºï¼›`MIX_FEED`ï¼šæ··åˆæºï¼‰
- å“åº”ä½“ï¼š

```json
{
  "id": "string",
  "type": "FEED",
  "title": "string",
  "description": "string",
  "icon": "https://example.com",
  "url": "https://example.com/feed.xml",
  "siteUrl": "https://example.com",
  "lastFetched": "2024-03-01T08:00:00Z",
  "lastUpdated": "2024-03-01T09:45:00Z",
  "articleCount": 128,
  "subscriberCount": 56,
  "subscribed": true,
  "failureCount": 0,
  "fetchError": null,
  "creatorName": "zhangsan",
  "isOwner": false,
  "isPublic": true,
  "filterConfig": null
}
```

- `id`ï¼šè®¢é˜…æºçš„å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰ã€‚
- `type`ï¼šæºç±»å‹ï¼Œ`FEED` æˆ– `MIX_FEED`ã€‚
- `icon`ï¼šæºå›¾æ ‡ï¼ˆç»Ÿä¸€å­—æ®µï¼ŒåŸ `avatar`ï¼‰ã€‚
- `subscribed`ï¼šå½“å‰ç”¨æˆ·æ˜¯å¦å·²è®¢é˜…è¯¥æºã€‚
- **Feed ç‰¹æœ‰å­—æ®µ**ï¼š`url`, `siteUrl`, `lastFetched`, `failureCount`, `fetchError`ã€‚
- **MixFeed ç‰¹æœ‰å­—æ®µ**ï¼š`creatorName`, `isOwner`, `isPublic`, `filterConfig`ã€‚

### æœç´¢è®¢é˜…

- æ–¹æ³•ï¼š`GET /api/feeds/search`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
    - `query`ï¼ˆå¿…å¡«ï¼Œå…³é”®è¯ã€URL æˆ– MixFeed åç§°ï¼‰
    - `type`ï¼ˆå¯é€‰ï¼Œé»˜è®¤ `ALL`ã€‚`ALL`: æ‰€æœ‰ï¼›`FEED`: ä»… Feedï¼›`MIX_FEED`: ä»… MixFeedï¼‰
- å“åº”ä½“ï¼š

```json
[
  {
    "id": "string",
    "type": "FEED",
    "title": "string",
    "description": "string",
    "icon": "https://example.com",
    "subscriberCount": 100,
    "subscribed": false
  }
]
```

- è¯´æ˜ï¼šæŒ‰ `query` åŒ¹é…æ•°æ®åº“ä¸­ç°æœ‰è®¢é˜…çš„ `siteUrl`ã€`url`ã€`title` å­—æ®µï¼Œæœ€å¤šè¿”å› 20 æ¡ï¼Œç»“æ„ä¸â€œè·å–è®¢é˜…åˆ—è¡¨â€ä¸€è‡´ã€‚
- `subscriberCount`ï¼šå½“å‰å¹³å°è®¢é˜…è¯¥æºçš„ç”¨æˆ·æ•°ã€‚
- `subscribed`ï¼šå½“å‰ç”¨æˆ·æ˜¯å¦å·²è®¢é˜…è¯¥æºã€‚

### é€šè¿‡ Feed URL æŸ¥è¯¢è¯¦æƒ…

- æ–¹æ³•ï¼š`GET /api/feeds/lookup`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `feedUrl`ï¼ˆå¿…å¡«ï¼‰ï¼šè®¢é˜…æºçš„ RSS åœ°å€ã€‚
- å“åº”ä½“ï¼šåŒ â€œè·å–è®¢é˜…æºè¯¦æƒ…â€ã€‚

## 7. ç”¨æˆ·è¡Œä¸º

### æ”¶è—æ–‡ç« 

- æ–¹æ³•ï¼š`POST /api/user/collections/:articleId`
- è®¤è¯ï¼š`Bearer <token>`
- å“åº”ä½“ï¼š

```json
{
  "message": "Article collected."
}
```

### å–æ¶ˆæ”¶è—

- æ–¹æ³•ï¼š`DELETE /api/user/collections/:articleId`
- è®¤è¯ï¼š`Bearer <token>`
- å“åº”ä½“ï¼š

```json
{
  "message": "Article uncollected."
}
```

### è·å–æ”¶è—åˆ—è¡¨

- æ–¹æ³•ï¼š`GET /api/user/collections`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `page`ï¼ˆé»˜è®¤ 0ï¼‰
  - `size`ï¼ˆé»˜è®¤ 10ï¼‰
  - `sort`ï¼ˆå¯é€‰ï¼Œå¦‚ `collectedAt,desc`ï¼‰
- å“åº”ä½“ï¼š

```json
{
  "content": [
    {
      "articleId": "string",
      "title": "string",
      "collectedAt": "2024-03-01T09:30:00Z"
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 10,
    "sort": {
      "sorted": true,
      "unsorted": false,
      "empty": false
    }
  },
  "totalElements": 12,
  "totalPages": 2,
  "last": false,
  "first": true,
  "size": 10,
  "number": 0,
  "sort": {
    "sorted": true,
    "unsorted": false,
    "empty": false
  },
  "numberOfElements": 10,
  "empty": false
}
```

### è®°å½•é˜…è¯»å†å²

- æ–¹æ³•ï¼š`POST /api/user/history`
- è®¤è¯ï¼š`Bearer <token>`
- è¯·æ±‚ä½“ï¼š

```json
{
  "articleId": "string",
  "readAt": "2024-03-01T10:20:00Z"
}
```

- è¯´æ˜ï¼š`readAt` å¯é€‰ï¼Œæœªæä¾›æ—¶ç”±æœåŠ¡å™¨è®°å½•å½“å‰æ—¶é—´ã€‚
- å“åº”ä½“ï¼š

```json
{
  "message": "History recorded."
}
```

### è·å–é˜…è¯»å†å²åˆ—è¡¨

- æ–¹æ³•ï¼š`GET /api/user/history`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `page`ï¼ˆé»˜è®¤ 0ï¼‰
  - `size`ï¼ˆé»˜è®¤ 10ï¼‰
  - `sort`ï¼ˆé»˜è®¤ `readAt,desc`ï¼‰
- å“åº”ä½“ï¼š

```json
{
  "content": [
    {
      "articleId": "string",
      "title": "string",
      "readAt": "2024-03-01T10:20:00Z"
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 10,
    "sort": {
      "sorted": true,
      "unsorted": false,
      "empty": false
    }
  },
  "totalElements": 58,
  "totalPages": 6,
  "last": false,
  "first": true,
  "size": 10,
  "number": 0,
  "sort": {
    "sorted": true,
    "unsorted": false,
    "empty": false
  },
  "numberOfElements": 10,
  "empty": false
}
```

### è®°å½• feed å·²è¯»

- æ–¹æ³•ï¼š`POST /api/user/readfeed/:feedId`
- è®¤è¯ï¼š`Bearer <token>`
- å“åº”ä½“ï¼š

```json
{
  "message": "Feed read."
}
```

## 8. æœç´¢

### æœç´¢æ–‡ç« 

- æ–¹æ³•ï¼š`GET /api/search`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `query`ï¼ˆå…³é”®è¯æˆ–è‡ªç„¶è¯­è¨€ï¼Œå¿…å¡«ï¼‰
  - `type`ï¼ˆ`keyword` æˆ– `semantic`ï¼Œå¯é€‰ï¼Œé»˜è®¤ `keyword`ï¼‰
  - `source`ï¼ˆå¯é€‰ï¼Œé»˜è®¤ `owner`ã€‚`owner`ï¼šåªè¿”å›å½“å‰ç”¨æˆ·çš„æ•°æ®ï¼›`global`ï¼šè¿”å›å…¨å±€æ•°æ®ï¼Œä¸åŒºåˆ†ç”¨æˆ·ï¼‰
  - `page`ï¼ˆé»˜è®¤ 0ï¼‰
  - `size`ï¼ˆé»˜è®¤ 10ï¼‰
- å“åº”ä½“ï¼š

```json
{
  "content": [
    {
      "id": "string",
      "title": "string",
      "summary": "string",
      "thumbnail": "string",
      "feedTitle": "string",
      "timeAgo": "2 å°æ—¶å‰",
      "score": 0.87
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 10,
    "sort": {
      "sorted": false,
      "unsorted": true,
      "empty": true
    }
  },
  "totalElements": 23,
  "totalPages": 3,
  "last": false,
  "first": true,
  "size": 10,
  "number": 0,
  "sort": {
    "sorted": false,
    "unsorted": true,
    "empty": true
  },
  "numberOfElements": 10,
  "empty": false
}
```

## 9. è®¢é˜…å‘ç°

### è·å–åˆ†ç±»åˆ—è¡¨

- æ–¹æ³•ï¼š`GET /api/discovery/categories`
- è®¤è¯ï¼š`Bearer <token>`
- å“åº”ä½“ï¼š

```json
{
  "categories": [
    {
      "id": "tech",
      "name": "ç§‘æŠ€",
      "icon": "ğŸ’»",
      "feedCount": 42,
      "description": "ç§‘æŠ€ã€ç¼–ç¨‹ã€äº’è”ç½‘ç›¸å…³å†…å®¹"
    }
  ]
}
```

### æµè§ˆè®¢é˜…æº

- æ–¹æ³•ï¼š`GET /api/discovery/feeds`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `category`ï¼ˆå¯é€‰ï¼Œåˆ†ç±»IDï¼‰
  - `page`ï¼ˆé»˜è®¤ 0ï¼‰
  - `size`ï¼ˆé»˜è®¤ 20ï¼‰
  - `sort`ï¼ˆå¯é€‰ï¼Œé»˜è®¤ `popular`ã€‚`popular`: çƒ­é—¨; `recent`: æœ€æ–°; `active`: æ´»è·ƒï¼‰
- å“åº”ä½“ï¼šåˆ†é¡µæ ¼å¼

```json
{
  "content": [
    {
      "feedId": "string",
      "name": "string",
      "description": "string",
      "url": "string",
      "siteUrl": "string",
      "favicon": "string",
      "category": "string",
      "categoryName": "string",
      "subscriberCount": 123,
      "articleCount": 456,
      "lastUpdated": "2024-03-01T10:00:00Z",
      "updateFrequency": "DAILY",
      "subscribed": false,
      "featured": true
    }
  ],
  "totalElements": 100,
  "totalPages": 5,
  "size": 20,
  "number": 0
}
```

### æœç´¢è®¢é˜…æº

- æ–¹æ³•ï¼š`GET /api/discovery/feeds/search`
- è®¤è¯ï¼š`Bearer <token>`
- æŸ¥è¯¢å‚æ•°ï¼š
  - `q`ï¼ˆå¿…å¡«ï¼Œæœç´¢å…³é”®è¯ï¼‰
  - `category`ï¼ˆå¯é€‰ï¼Œé™å®šåˆ†ç±»ï¼‰
  - `page`ï¼ˆé»˜è®¤ 0ï¼‰
  - `size`ï¼ˆé»˜è®¤ 20ï¼‰
- å“åº”ä½“ï¼šåˆ†é¡µæ ¼å¼

```json
{
  "content": [
    {
      "feedId": "string",
      "name": "string",
      "description": "string",
      "url": "string",
      "siteUrl": "string",
      "favicon": "string",
      "category": "string",
      "categoryName": "string",
      "subscriberCount": 123,
      "articleCount": 456,
      "lastUpdated": "2024-03-01T10:00:00Z",
      "updateFrequency": "DAILY",
      "subscribed": false,
      "featured": true
    }
  ],
  "totalElements": 1,
  "totalPages": 1,
  "size": 20,
  "number": 0
}
```
